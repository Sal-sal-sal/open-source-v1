# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Cloud Storage (GCS)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã —Å Google Cloud Storage –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫.

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π** –≤ GCS –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** –≤ GCS –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫** –∏–∑ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –∑–∞–º–µ—Ç–æ–∫

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. Google Cloud Storage

#### –°–æ–∑–¥–∞–Ω–∏–µ Bucket
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ Cloud Storage API
4. –°–æ–∑–¥–∞–π—Ç–µ bucket –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
1. –°–æ–∑–¥–∞–π—Ç–µ Service Account:
   ```bash
   gcloud iam service-accounts create transcription-service \
     --display-name="Transcription Service"
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á:
   ```bash
   gcloud iam service-accounts keys create ~/gcs-key.json \
     --iam-account=transcription-service@your-project.iam.gserviceaccount.com
   ```

3. –ù–∞–∑–Ω–∞—á—å—Ç–µ —Ä–æ–ª–∏:
   ```bash
   gcloud projects add-iam-policy-binding your-project \
     --member="serviceAccount:transcription-service@your-project.iam.gserviceaccount.com" \
     --role="roles/storage.objectAdmin"
   ```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:

```bash
# Google Cloud Storage
GCS_BUCKET_NAME=your-bucket-name
GOOGLE_APPLICATION_CREDENTIALS=/path/to/gcs-key.json

# Groq API (–¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏)
GROQ_API_KEY=gsk_your_groq_api_key_here
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install google-cloud-storage
```

## API Endpoints

### –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–µ–π

```bash
POST /api/audio/load
Content-Type: multipart/form-data

Parameters:
- file: Audio file (mp3, wav, webm, m4a, ogg)
- auto_transcribe: true/false (default: true)
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "file_id": "uuid-here",
  "transcription": {
    "status": "completed",
    "gcs_url": "gs://bucket-name/transcripts/user-id/file-id/transcript.json",
    "transcript_length": 1500,
    "total_duration": 180.5,
    "chunk_count": 6,
    "service_used": "groq",
    "model": "distil-whisper-large-v3"
  }
}
```

### –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å GCS

```bash
POST /api/audio/transcript/
Content-Type: multipart/form-data

Parameters:
- file: Audio file
- save_to_gcs: true/false (default: false)
- message_id: Unique message ID (optional)
- chat_id: Chat ID (optional)
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "transcript": "–¢–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏...",
  "gcs_storage": {
    "status": "completed",
    "message_id": "message-uuid",
    "gcs_url": "gs://bucket-name/voice_messages/user-id/message-id/message.json"
  }
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –∏–∑ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

```bash
POST /api/notes/create-from-transcript/
Content-Type: application/x-www-form-urlencoded

Parameters:
- file_id: ID —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- voice_message_id: ID –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (optional)
- note_title: –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏
- note_content: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
- tags: –¢–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "status": "success",
  "note": {
    "id": "note-uuid",
    "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏",
    "content": "## üìö –ê—É–¥–∏–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è\n\n–¢–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏...\n\n## üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n\n–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è...\n\n## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏\n\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç...",
    "tags": ["—Ç–µ–≥1", "—Ç–µ–≥2"],
    "user_id": "user-id",
    "created_at": "2024-01-01T12:00:00",
    "sources": {
      "transcript_file_id": "file-id",
      "voice_message_id": "message-id",
      "transcript_metadata": {...}
    }
  },
  "transcript_length": 1500,
  "voice_message_length": 200
}
```

### –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
GET /api/notes/transcripts/
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "transcripts": [
    {
      "file_id": "file-uuid",
      "gcs_url": "gs://bucket-name/transcripts/user-id/file-id/transcript.json",
      "upload_timestamp": "2024-01-01T12:00:00",
      "original_filename": "audio.mp3",
      "transcript_length": 1500,
      "total_duration": 180.5,
      "service_used": "groq",
      "model": "distil-whisper-large-v3",
      "language": "ru"
    }
  ],
  "count": 1
}
```

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```bash
POST /api/notes/combine-sources/
Content-Type: application/x-www-form-urlencoded

Parameters:
- file_ids: List of transcript file IDs
- voice_message_ids: List of voice message IDs
- title: Note title
- additional_content: Additional content
- tags: Comma-separated tags
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ GCS

### –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
```
gs://bucket-name/
‚îî‚îÄ‚îÄ transcripts/
    ‚îî‚îÄ‚îÄ user-id/
        ‚îî‚îÄ‚îÄ file-id/
            ‚îî‚îÄ‚îÄ transcript.json
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ transcript.json:**
```json
{
  "transcript": "–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏...",
  "chunks": [
    {
      "start": 0.0,
      "end": 30.0,
      "text": "–¢–µ–∫—Å—Ç —á–∞–Ω–∫–∞..."
    }
  ],
  "total_duration": 180.5,
  "chunk_count": 6,
  "service_used": "groq",
  "model": "distil-whisper-large-v3",
  "language": "ru",
  "task": "transcribe"
}
```

### –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
```
gs://bucket-name/
‚îî‚îÄ‚îÄ voice_messages/
    ‚îî‚îÄ‚îÄ user-id/
        ‚îî‚îÄ‚îÄ message-id/
            ‚îî‚îÄ‚îÄ message.json
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ message.json:**
```json
{
  "message_id": "message-uuid",
  "user_id": "user-id",
  "chat_id": "chat-id",
  "transcript": "–¢–µ–∫—Å—Ç –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è...",
  "timestamp": "2024-01-01T12:00:00",
  "type": "voice_message"
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ —Ñ–∞–π–ª–∞

```python
import requests

# –ó–∞–≥—Ä—É–∑–∫–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–µ–π
with open('audio.mp3', 'rb') as f:
    files = {'file': f}
    data = {'auto_transcribe': 'true'}
    
    response = requests.post(
        'http://localhost:8000/api/audio/load',
        files=files,
        data=data
    )
    
    result = response.json()
    file_id = result['file_id']
    gcs_url = result['transcription']['gcs_url']
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –∏–∑ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
data = {
    'file_id': file_id,
    'note_title': '–ú–æ—è –∑–∞–º–µ—Ç–∫–∞',
    'note_content': '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º—ã—Å–ª–∏...',
    'tags': '–∞—É–¥–∏–æ, –∑–∞–º–µ—Ç–∫–∏'
}

response = requests.post(
    'http://localhost:8000/api/notes/create-from-transcript/',
    data=data
)

note = response.json()['note']
```

### 3. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
data = {
    'file_ids': ['file1', 'file2'],
    'voice_message_ids': ['message1'],
    'title': '–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞',
    'additional_content': '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç',
    'tags': '–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, –∑–∞–º–µ—Ç–∫–∞'
}

response = requests.post(
    'http://localhost:8000/api/notes/combine-sources/',
    data=data
)
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
python test_gcs_integration.py
```

### –¢–µ—Å—Ç—ã –≤–∫–ª—é—á–∞—é—Ç:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ —Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–µ–π** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ GCS
2. **–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å GCS** - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
3. **–°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π
4. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏** - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –∏–∑ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Service Account –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ GCS
- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤ bucket
- –î–æ—Å—Ç—É–ø –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ—Å—Ç—É–ø–∞
```
transcripts/user-id/file-id/     # –¢–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
voice_messages/user-id/message-id/  # –¢–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π bucket –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ lifecycle policies –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏
3. –í–∫–ª—é—á–∏—Ç–µ –∞—É–¥–∏—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ bucket
4. –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ Service Account

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å GCS –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π
- –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ GCS
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –û—à–∏–±–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "GCS_BUCKET_NAME –Ω–µ —É–∫–∞–∑–∞–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `GCS_BUCKET_NAME`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ bucket —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ GCS
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ Service Account

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to initialize GCS client"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–ª—é—á–∞ –≤ `GOOGLE_APPLICATION_CREDENTIALS`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Service Account –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

### –ü—Ä–æ–±–ª–µ–º–∞: "Transcript not found in GCS"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ file_id –∏ user_id –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É –≤ GCS

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ GCS

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ bucket –≤ —Ç–æ–º –∂–µ —Ä–µ–≥–∏–æ–Ω–µ, —á—Ç–æ –∏ —Å–µ—Ä–≤–µ—Ä
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π
3. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CDN –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ GCS
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏–≤–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Cloud Functions
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö –æ–±–ª–∞—á–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â (AWS S3, Azure Blob)
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π
- [ ] –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π 